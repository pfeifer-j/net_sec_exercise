"""
exercise 3.2.1
@Authors: Noah Link, Jan Pfeifer, Julian Weske
"""

import socket

if __name__ == "__main__":
    HOST = "195.37.209.19"
    PORT = 7213

    # Create a socket object
    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client_socket:
        # Connect to the server
        client_socket.connect((HOST, PORT))
        print("\n##########################\n")
        print("Connection established with server.")

        """
        # Send data request to the server
        data_request_hex = "010a00013d07e50004770473840100012e"
        client_socket.sendall(bytes.fromhex(data_request_hex))
        print("Data request sent: ", bytes.fromhex(data_request_hex))
        response = client_socket.recv(4096)
        print("Dataresponse from server:", response)
        print("\n##########################\n")
        """

        # Construct the file request packet
        # b'\x01\n\x00\x01=\x07\xe5\x00\x19w\x04s\x99\x01\x00\x16./.security-report.txt'
        file_request_hex = (
            # "010a 000 13 d07e50 01977 0473 9901 00 16 6d61726b6574696e672d73747261746567792e747874"
            "  010a 000 13 d07e50 01977 0473 9901 00 16 2e73656375726974792d7265706f72742e747874"
            # "020a 000 13 d07e50 a6f74 0473 e502 00 16 0a546d61726b6574696e672d73747261746567792e74787453616c657320537472617465677920666f7220746865204e65772050726f647563740a0a50726f64756374204e616d653a20517569636b466974e284a2efb88f0a0a496e74726f64756374696f6e3a0a517569636b466974e284a2efb88f20697320616e20696e6e6f7661746976652070726f647563742064657369676e6564207370656369666963616c6c7920666f7220637573746f6d6572732077686f2076616c756520626f7468207175616c69747920616e64206166666f72646162696c6974792e204f75722070726f64756374206973206d616e75666163747572656420696e204368696e612c20616c6c6f77696e6720757320746f206c6576657261676520636f73742d6566666563746976652070726f64756374696f6e20616476616e746167657320746f206f6666657220686967682d7175616c69747920676f6f64732061742061206672616374696f6e206f662074686520757375616c20636f7374732e20546869732073747261746567792061696d7320746f20756e646572637574206f757220636f6d70657469746f7273207768696c65207365637572696e67206f7572206d61726b657420736861726520696e204575726f70652e0a0a5461726765742041756469656e63653a0a4f7572207072696d61727920666f637573206973206f6e2070726963652d636f6e7363696f757320636f6e73756d65727320696e204575726f70652077686f2076616c7565207175616c69747920616e642066756e6374696f6e616c6974792e205468697320696e636c7564657320686f757365686f6c64732077697468206d6f64657261746520696e636f6d65732061732077656c6c20617320736d616c6c20627573696e6573736573206c6f6f6b696e6720746f20726564756365207468656972206f7065726174696e6720636f7374732e0a0a53616c6573204368616e6e656c733a0a0a202020204f6e6c696e6520506c6174666f726d733a205574696c697a652065737461626c697368656420652d636f6d6d6572636520706c6174666f726d73207375636820617320416d617a6f6e2c20654261792c20616e642070726f707269657461727920776562736974657320746f2073656c6c207468652070726f64756374206469726563746c7920746f20656e6420636f6e73756d6572732e0a2020202052657461696c2053746f7265733a20466f72676520706172746e657273686970732077697468206c6f63616c2072657461696c65727320616e6420646973636f756e7465727320746f206f6666657220517569636b466974e284a2efb88f20696e20706879736963616c2073746f7265732e0a2020202057686f6c6573616c653a204f666665722061747472616374697665207465726d7320746f2077686f6c6573616c65727320746f20616368696576652062726f6164657220646973747269627574696f6e20616e642073656c6c207468652070726f6475637420696e206c6172676572207175616e7469746965732e0a0a4d61726b6574696e672053747261746567793a0a0a20202020456d70686173697a6520507269636520416476616e746167653a20486967686c696768742074686520636f737420656666696369656e6379206f66207468652070726f64756374206279207265666572656e63696e6720746865206c6f772d636f73742070726f64756374696f6e206c6f636174696f6e20696e204368696e612e20436f6d7061726520746865207072696365206f6620517569636b466974e284a2efb88f20746f2073696d696c61722070726f6475637473206f6e20746865206d61726b657420746f20696c6c75737472617465207468652076616c756520616476616e746167652e0a20202020436f6d6d756e6963617465205175616c697479204173737572616e63653a204465737069746520746865206c6f772070726963652c20776520656e7375726520686967682070726f64756374207175616c69747920616e642072656c696162696c6974792e205574696c697a6520637573746f6d6572207265766965777320616e642063657274696669636174696f6e7320746f20737472656e677468656e20636f6e73756d657220747275737420696e207468652070726f647563742e0a202020205461726765746564204164766572746973696e673a20506c6163652074617267657465642061647320696e206f6e6c696e65206d6564696120616e6420736f6369616c206e6574776f726b73207461696c6f72656420746f20746865206e65656473206f6620746865207461726765742061756469656e63652e20416c736f2c207574696c697a6520696e666c75656e636572206d61726b6574696e6720746f20696e63726561736520726561636820616e642070726f6d6f74652070726f647563742061776172656e6573732e0a0a437573746f6d657220526574656e74696f6e3a0a0a20202020437573746f6d657220536572766963653a2050726f76696465206661737420616e642072656c6961626c6520637573746f6d6572207365727669636520746f20616e73776572207175657374696f6e7320616e64207265736f6c7665206973737565732e20546869732063616e206265206163686965766564207468726f75676820612077656c6c2d747261696e656420737570706f7274207465616d20616e6420656666696369656e7420636f6d6d756e69636174696f6e206368616e6e656c732e0a202020204c6f79616c74792050726f6772616d733a205265776172642072657065617420637573746f6d6572732077697468206578636c7573697665206f666665727320616e6420646973636f756e747320746f20656e636f7572616765207468656972206c6f79616c747920616e64206b656570207468656d20656e67616765642077697468207468652070726f647563742e0a20202020536f6c6963697420466565646261636b3a20526567756c61726c7920736f6c6963697420666565646261636b2066726f6d20637573746f6d65727320746f2062657474657220756e6465727374616e64207468656972206e6565647320616e6420646573697265732c20616e6420636f6e74696e756f75736c7920696d70726f7665207468652070726f647563742e0a0a436f6e636c7573696f6e3a0a5769746820616e206566666563746976652073616c6573207374726174656779206261736564206f6e206120636f73742d6566666563746976652070726f64756374696f6e20617070726f61636820616e64207461726765746564206d61726b6574696e672063616d706169676e2c20517569636b466974e284a2efb88f206973206f7074696d"
        ).replace(" ", "")
        client_socket.sendall(bytes.fromhex(file_request_hex))
        print("File request sent: ", bytes.fromhex(file_request_hex))
        response = client_socket.recv(4096)
        print("Fileresponse from server:", response)
        print("\n##########################\n")
